{"ast":null,"code":"import { initialState } from './initialState';\nfunction programReducer(state = initialState.programs, action) {\n  switch (action.type) {\n    case 'SET_SELECTED_PROGRAM':\n      {\n        const {\n          program,\n          selected\n        } = action.payload;\n        if (!program || !program.id) {\n          console.error('Invalid program data received:', program);\n          return state;\n        }\n        return {\n          ...state,\n          program: {\n            ...program,\n            // Directly set the selected program here\n            selected // Ensure selected property is added or updated\n          }\n        };\n      }\n    case 'DESELECT_PROGRAM':\n      {\n        const {\n          programId\n        } = action.payload;\n        if (!state.program || state.program.id !== programId && state.program.tempId !== programId) {\n          console.error('Program not found or invalid payload:', action.payload);\n          return state;\n        }\n        return {\n          ...state,\n          program: {\n            ...state.program,\n            selected: false\n          }\n        };\n      }\n    case 'ADD_PROGRAM':\n      const {\n        id,\n        name,\n        program_duration,\n        duration_unit,\n        days_per_week,\n        main_goal\n      } = action.payload;\n      if (!state.program || state.program.id !== id && state.program.tempId !== id) {\n        console.error('Program not found:', id);\n        return state; // Return the current state if the program ID does not exist.\n      }\n      const updatedProgram = {\n        ...state.program,\n        name,\n        program_duration,\n        duration_unit,\n        days_per_week,\n        main_goal\n      };\n      return {\n        ...state,\n        program: updatedProgram\n      };\n    case 'UPDATE_PROGRAM':\n      {\n        const updatedProgram = action.payload;\n        console.log('Updating program in reducer:', updatedProgram);\n        return {\n          ...state,\n          program: {\n            ...state.program,\n            // Spread the existing program details to preserve other fields like workouts\n            ...updatedProgram // Overwrite with the updated program details\n          }\n        };\n      }\n    case 'UPDATE_PROGRAM_SUCCESS':\n      {\n        const updatedProgram = action.payload;\n        console.log('Updating program in reducer:', updatedProgram);\n        if (!updatedProgram || !updatedProgram.id) {\n          console.error('Invalid program data received:', updatedProgram);\n          return state;\n        }\n        return {\n          ...state,\n          program: {\n            ...state.program,\n            ...updatedProgram // Overwrite the program with the updated data\n          },\n          selectedProgram: updatedProgram.id // Optionally update the selected program ID\n        };\n      }\n    case 'DELETE_PROGRAM':\n      {\n        const {\n          programId\n        } = action.payload;\n        if (!programId || state.program.id !== programId && state.program.tempId !== programId) {\n          console.error('Program not found or invalid payload:', action.payload);\n          return state;\n        }\n\n        // Reset the state to remove the program\n        return {\n          ...state,\n          program: null,\n          // or initialState.program to reset to initial state\n          selectedProgram: null,\n          // Resetting selected program as well\n          activeWorkout: null // Reset any active workout associated with the program\n        };\n      }\n    default:\n      return state;\n  }\n}\nexport { programReducer };","map":{"version":3,"names":["initialState","programReducer","state","programs","action","type","program","selected","payload","id","console","error","programId","tempId","name","program_duration","duration_unit","days_per_week","main_goal","updatedProgram","log","selectedProgram","activeWorkout"],"sources":["/Users/mike/Documents/purple.nosync/pow/web-frontend/src/reducers/programReducer.js"],"sourcesContent":["import { initialState } from './initialState';\n\nfunction programReducer(state = initialState.programs, action) {\n  switch (action.type) {\n    case 'SET_SELECTED_PROGRAM': {\n      const { program, selected } = action.payload;\n\n      if (!program || !program.id) {\n        console.error('Invalid program data received:', program);\n        return state;\n      }\n\n      return {\n        ...state,\n        program: {\n          ...program, // Directly set the selected program here\n          selected // Ensure selected property is added or updated\n        }\n      };\n    }\n\n    case 'DESELECT_PROGRAM': {\n      const { programId } = action.payload;\n\n      if (\n        !state.program ||\n        (state.program.id !== programId && state.program.tempId !== programId)\n      ) {\n        console.error('Program not found or invalid payload:', action.payload);\n        return state;\n      }\n\n      return {\n        ...state,\n        program: {\n          ...state.program,\n          selected: false\n        }\n      };\n    }\n\n    case 'ADD_PROGRAM':\n      const {\n        id,\n        name,\n        program_duration,\n        duration_unit,\n        days_per_week,\n        main_goal\n      } = action.payload;\n\n      if (\n        !state.program ||\n        (state.program.id !== id && state.program.tempId !== id)\n      ) {\n        console.error('Program not found:', id);\n        return state; // Return the current state if the program ID does not exist.\n      }\n\n      const updatedProgram = {\n        ...state.program,\n        name,\n        program_duration,\n        duration_unit,\n        days_per_week,\n        main_goal\n      };\n\n      return {\n        ...state,\n        program: updatedProgram\n      };\n\n    case 'UPDATE_PROGRAM': {\n      const updatedProgram = action.payload;\n      console.log('Updating program in reducer:', updatedProgram);\n\n      return {\n        ...state,\n        program: {\n          ...state.program, // Spread the existing program details to preserve other fields like workouts\n          ...updatedProgram // Overwrite with the updated program details\n        }\n      };\n    }\n\n    case 'UPDATE_PROGRAM_SUCCESS': {\n      const updatedProgram = action.payload;\n      console.log('Updating program in reducer:', updatedProgram);\n\n      if (!updatedProgram || !updatedProgram.id) {\n        console.error('Invalid program data received:', updatedProgram);\n        return state;\n      }\n\n      return {\n        ...state,\n        program: {\n          ...state.program,\n          ...updatedProgram // Overwrite the program with the updated data\n        },\n        selectedProgram: updatedProgram.id // Optionally update the selected program ID\n      };\n    }\n\n    case 'DELETE_PROGRAM': {\n      const { programId } = action.payload;\n\n      if (\n        !programId ||\n        (state.program.id !== programId && state.program.tempId !== programId)\n      ) {\n        console.error('Program not found or invalid payload:', action.payload);\n        return state;\n      }\n\n      // Reset the state to remove the program\n      return {\n        ...state,\n        program: null, // or initialState.program to reset to initial state\n        selectedProgram: null, // Resetting selected program as well\n        activeWorkout: null // Reset any active workout associated with the program\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport { programReducer };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}