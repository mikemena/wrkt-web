{"ast":null,"code":"import { v4 as uuidv4 } from 'uuid';\nimport { actionTypes } from '../actions/actionTypes';\nimport { initialState } from './initialState';\nfunction workoutReducer(state = initialState.workouts, action) {\n  // console.log('Action Type:', action.type);\n  // console.log('State Before:', state);\n\n  switch (action.type) {\n    case actionTypes.ADD_WORKOUT:\n      {\n        console.log('ADD_WORKOUT action triggered', action.payload);\n        if (!action.payload || !action.payload.programId) {\n          console.error('Invalid payload for ADD_WORKOUT', action.payload);\n          return state;\n        }\n        const workoutId = uuidv4();\n        const workoutTitle = action.payload.name || `Workout ${Object.keys(state).length + 1}`;\n        const newWorkout = {\n          id: workoutId,\n          name: workoutTitle,\n          exercises: [],\n          programId: action.payload.programId,\n          order: Object.keys(state).length + 1\n        };\n        const newState = {\n          ...state,\n          [workoutId]: newWorkout\n        };\n        // console.log('State After ADD_WORKOUT:', newState);\n        return newState;\n      }\n    case 'SET_WORKOUTS':\n      {\n        const workouts = action.payload;\n        const newState = workouts.reduce((acc, workout) => {\n          acc[workout.id] = {\n            ...workout,\n            exercises: workout.exercises.map(exercise => exercise.id)\n          };\n          return acc;\n        }, {});\n        return {\n          ...state,\n          ...newState\n        };\n      }\n    case actionTypes.UPDATE_WORKOUT:\n      {\n        console.log('Current state:', state);\n        console.log('Payload:', action.payload);\n        if (!action.payload || !action.payload.id) {\n          console.error('Invalid payload for UPDATE_WORKOUT', action.payload);\n          return state;\n        }\n        const workout = state[action.payload.id];\n        if (!workout) {\n          console.error('Workout not found for UPDATE_WORKOUT', action.payload.id);\n          return state;\n        }\n        const newState = {\n          ...state,\n          [action.payload.id]: {\n            ...workout,\n            ...action.payload,\n            id: action.payload.id\n          }\n        };\n        // console.log('State After UPDATE_WORKOUT:', newState);\n        return newState;\n      }\n    case actionTypes.DELETE_WORKOUT:\n      {\n        if (!action.payload) {\n          console.error('Invalid payload for DELETE_WORKOUT', action.payload);\n          return state;\n        }\n        const {\n          [action.payload]: deletedWorkout,\n          ...remainingWorkouts\n        } = state;\n        const reorderedWorkouts = Object.values(remainingWorkouts).sort((a, b) => a.order - b.order).map((workout, index) => ({\n          ...workout,\n          order: index + 1\n        })).reduce((acc, workout) => {\n          acc[workout.id] = workout;\n          return acc;\n        }, {});\n        const newState = {\n          ...reorderedWorkouts\n        };\n        return newState;\n      }\n    default:\n      // console.log('State After Default:', state);\n      return state;\n  }\n}\nexport { workoutReducer };","map":{"version":3,"names":["v4","uuidv4","actionTypes","initialState","workoutReducer","state","workouts","action","type","ADD_WORKOUT","console","log","payload","programId","error","workoutId","workoutTitle","name","Object","keys","length","newWorkout","id","exercises","order","newState","reduce","acc","workout","map","exercise","UPDATE_WORKOUT","DELETE_WORKOUT","deletedWorkout","remainingWorkouts","reorderedWorkouts","values","sort","a","b","index"],"sources":["/Users/mike/Documents/purple.nosync/pow/web-frontend/src/reducers/workoutReducer.js"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\nimport { actionTypes } from '../actions/actionTypes';\nimport { initialState } from './initialState';\n\nfunction workoutReducer(state = initialState.workouts, action) {\n  // console.log('Action Type:', action.type);\n  // console.log('State Before:', state);\n\n  switch (action.type) {\n    case actionTypes.ADD_WORKOUT: {\n      console.log('ADD_WORKOUT action triggered', action.payload);\n      if (!action.payload || !action.payload.programId) {\n        console.error('Invalid payload for ADD_WORKOUT', action.payload);\n        return state;\n      }\n\n      const workoutId = uuidv4();\n      const workoutTitle =\n        action.payload.name || `Workout ${Object.keys(state).length + 1}`;\n      const newWorkout = {\n        id: workoutId,\n        name: workoutTitle,\n        exercises: [],\n        programId: action.payload.programId,\n        order: Object.keys(state).length + 1\n      };\n\n      const newState = {\n        ...state,\n        [workoutId]: newWorkout\n      };\n      // console.log('State After ADD_WORKOUT:', newState);\n      return newState;\n    }\n\n    case 'SET_WORKOUTS': {\n      const workouts = action.payload;\n\n      const newState = workouts.reduce((acc, workout) => {\n        acc[workout.id] = {\n          ...workout,\n          exercises: workout.exercises.map(exercise => exercise.id)\n        };\n        return acc;\n      }, {});\n\n      return {\n        ...state,\n        ...newState\n      };\n    }\n\n    case actionTypes.UPDATE_WORKOUT: {\n      console.log('Current state:', state);\n      console.log('Payload:', action.payload);\n      if (!action.payload || !action.payload.id) {\n        console.error('Invalid payload for UPDATE_WORKOUT', action.payload);\n        return state;\n      }\n\n      const workout = state[action.payload.id];\n      if (!workout) {\n        console.error(\n          'Workout not found for UPDATE_WORKOUT',\n          action.payload.id\n        );\n        return state;\n      }\n\n      const newState = {\n        ...state,\n        [action.payload.id]: {\n          ...workout,\n          ...action.payload,\n          id: action.payload.id\n        }\n      };\n      // console.log('State After UPDATE_WORKOUT:', newState);\n      return newState;\n    }\n\n    case actionTypes.DELETE_WORKOUT: {\n      if (!action.payload) {\n        console.error('Invalid payload for DELETE_WORKOUT', action.payload);\n        return state;\n      }\n\n      const { [action.payload]: deletedWorkout, ...remainingWorkouts } = state;\n      const reorderedWorkouts = Object.values(remainingWorkouts)\n        .sort((a, b) => a.order - b.order)\n        .map((workout, index) => ({\n          ...workout,\n          order: index + 1\n        }))\n        .reduce((acc, workout) => {\n          acc[workout.id] = workout;\n          return acc;\n        }, {});\n\n      const newState = {\n        ...reorderedWorkouts\n      };\n\n      return newState;\n    }\n\n    default:\n      // console.log('State After Default:', state);\n      return state;\n  }\n}\n\nexport { workoutReducer };\n"],"mappings":"AAAA,SAASA,EAAE,IAAIC,MAAM,QAAQ,MAAM;AACnC,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,YAAY,QAAQ,gBAAgB;AAE7C,SAASC,cAAcA,CAACC,KAAK,GAAGF,YAAY,CAACG,QAAQ,EAAEC,MAAM,EAAE;EAC7D;EACA;;EAEA,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKN,WAAW,CAACO,WAAW;MAAE;QAC5BC,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEJ,MAAM,CAACK,OAAO,CAAC;QAC3D,IAAI,CAACL,MAAM,CAACK,OAAO,IAAI,CAACL,MAAM,CAACK,OAAO,CAACC,SAAS,EAAE;UAChDH,OAAO,CAACI,KAAK,CAAC,iCAAiC,EAAEP,MAAM,CAACK,OAAO,CAAC;UAChE,OAAOP,KAAK;QACd;QAEA,MAAMU,SAAS,GAAGd,MAAM,CAAC,CAAC;QAC1B,MAAMe,YAAY,GAChBT,MAAM,CAACK,OAAO,CAACK,IAAI,IAAK,WAAUC,MAAM,CAACC,IAAI,CAACd,KAAK,CAAC,CAACe,MAAM,GAAG,CAAE,EAAC;QACnE,MAAMC,UAAU,GAAG;UACjBC,EAAE,EAAEP,SAAS;UACbE,IAAI,EAAED,YAAY;UAClBO,SAAS,EAAE,EAAE;UACbV,SAAS,EAAEN,MAAM,CAACK,OAAO,CAACC,SAAS;UACnCW,KAAK,EAAEN,MAAM,CAACC,IAAI,CAACd,KAAK,CAAC,CAACe,MAAM,GAAG;QACrC,CAAC;QAED,MAAMK,QAAQ,GAAG;UACf,GAAGpB,KAAK;UACR,CAACU,SAAS,GAAGM;QACf,CAAC;QACD;QACA,OAAOI,QAAQ;MACjB;IAEA,KAAK,cAAc;MAAE;QACnB,MAAMnB,QAAQ,GAAGC,MAAM,CAACK,OAAO;QAE/B,MAAMa,QAAQ,GAAGnB,QAAQ,CAACoB,MAAM,CAAC,CAACC,GAAG,EAAEC,OAAO,KAAK;UACjDD,GAAG,CAACC,OAAO,CAACN,EAAE,CAAC,GAAG;YAChB,GAAGM,OAAO;YACVL,SAAS,EAAEK,OAAO,CAACL,SAAS,CAACM,GAAG,CAACC,QAAQ,IAAIA,QAAQ,CAACR,EAAE;UAC1D,CAAC;UACD,OAAOK,GAAG;QACZ,CAAC,EAAE,CAAC,CAAC,CAAC;QAEN,OAAO;UACL,GAAGtB,KAAK;UACR,GAAGoB;QACL,CAAC;MACH;IAEA,KAAKvB,WAAW,CAAC6B,cAAc;MAAE;QAC/BrB,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEN,KAAK,CAAC;QACpCK,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEJ,MAAM,CAACK,OAAO,CAAC;QACvC,IAAI,CAACL,MAAM,CAACK,OAAO,IAAI,CAACL,MAAM,CAACK,OAAO,CAACU,EAAE,EAAE;UACzCZ,OAAO,CAACI,KAAK,CAAC,oCAAoC,EAAEP,MAAM,CAACK,OAAO,CAAC;UACnE,OAAOP,KAAK;QACd;QAEA,MAAMuB,OAAO,GAAGvB,KAAK,CAACE,MAAM,CAACK,OAAO,CAACU,EAAE,CAAC;QACxC,IAAI,CAACM,OAAO,EAAE;UACZlB,OAAO,CAACI,KAAK,CACX,sCAAsC,EACtCP,MAAM,CAACK,OAAO,CAACU,EACjB,CAAC;UACD,OAAOjB,KAAK;QACd;QAEA,MAAMoB,QAAQ,GAAG;UACf,GAAGpB,KAAK;UACR,CAACE,MAAM,CAACK,OAAO,CAACU,EAAE,GAAG;YACnB,GAAGM,OAAO;YACV,GAAGrB,MAAM,CAACK,OAAO;YACjBU,EAAE,EAAEf,MAAM,CAACK,OAAO,CAACU;UACrB;QACF,CAAC;QACD;QACA,OAAOG,QAAQ;MACjB;IAEA,KAAKvB,WAAW,CAAC8B,cAAc;MAAE;QAC/B,IAAI,CAACzB,MAAM,CAACK,OAAO,EAAE;UACnBF,OAAO,CAACI,KAAK,CAAC,oCAAoC,EAAEP,MAAM,CAACK,OAAO,CAAC;UACnE,OAAOP,KAAK;QACd;QAEA,MAAM;UAAE,CAACE,MAAM,CAACK,OAAO,GAAGqB,cAAc;UAAE,GAAGC;QAAkB,CAAC,GAAG7B,KAAK;QACxE,MAAM8B,iBAAiB,GAAGjB,MAAM,CAACkB,MAAM,CAACF,iBAAiB,CAAC,CACvDG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACd,KAAK,GAAGe,CAAC,CAACf,KAAK,CAAC,CACjCK,GAAG,CAAC,CAACD,OAAO,EAAEY,KAAK,MAAM;UACxB,GAAGZ,OAAO;UACVJ,KAAK,EAAEgB,KAAK,GAAG;QACjB,CAAC,CAAC,CAAC,CACFd,MAAM,CAAC,CAACC,GAAG,EAAEC,OAAO,KAAK;UACxBD,GAAG,CAACC,OAAO,CAACN,EAAE,CAAC,GAAGM,OAAO;UACzB,OAAOD,GAAG;QACZ,CAAC,EAAE,CAAC,CAAC,CAAC;QAER,MAAMF,QAAQ,GAAG;UACf,GAAGU;QACL,CAAC;QAED,OAAOV,QAAQ;MACjB;IAEA;MACE;MACA,OAAOpB,KAAK;EAChB;AACF;AAEA,SAASD,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}