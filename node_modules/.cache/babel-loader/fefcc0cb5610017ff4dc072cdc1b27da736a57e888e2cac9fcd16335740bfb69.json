{"ast":null,"code":"import { v4 as uuidv4 } from 'uuid';\nimport { initialState } from './programReducer';\nfunction exerciseReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'ADD_EXERCISE':\n      return {\n        ...state,\n        program: {\n          ...state.program,\n          workouts: state.program.workouts.map(workout => {\n            if (workout.id === action.payload.workoutId) {\n              var _workout$exercises;\n              const currentExercises = (_workout$exercises = workout.exercises) !== null && _workout$exercises !== void 0 ? _workout$exercises : [];\n              const newExercises = action.payload.exercises.reduce((acc, exercise) => {\n                if (!currentExercises.some(ex => ex.exerciseCatalogId === exercise.exerciseCatalogId)) {\n                  const newExercise = {\n                    ...exercise,\n                    id: uuidv4(),\n                    isNew: true\n                  };\n                  acc.push(newExercise);\n                }\n                return acc;\n              }, []);\n              return {\n                ...workout,\n                exercises: [...currentExercises, ...newExercises]\n              };\n            }\n            return workout;\n          })\n        }\n      };\n    case 'UPDATE_EXERCISE':\n      return {\n        ...state,\n        program: {\n          ...state.program,\n          workouts: state.program.workouts.map(workout => {\n            if (workout.id === action.payload.workoutId) {\n              // Map through exercises to update the specific one\n              const updatedExercises = workout.exercises.map(exercise => {\n                if (exercise.catalog_exercise_id === action.payload.updatedExercise.catalog_exercise_id) {\n                  return {\n                    ...exercise,\n                    ...action.payload.updatedExercise\n                  };\n                }\n                return exercise;\n              });\n              return {\n                ...workout,\n                exercises: updatedExercises\n              };\n            }\n            return workout;\n          })\n        }\n      };\n    case 'DELETE_EXERCISE':\n      return {\n        ...state,\n        program: {\n          ...state.program,\n          workouts: state.program.workouts.map(workout => {\n            if (workout.id === action.payload.workoutId) {\n              // Filter out the exercise that needs to be deleted\n              const filteredExercises = workout.exercises.filter(exercise => exercise.id !== action.payload.exerciseId);\n              return {\n                ...workout,\n                exercises: filteredExercises\n              };\n            }\n            return workout;\n          })\n        }\n      };\n    default:\n      return state;\n  }\n}\nexport { exerciseReducer, initialState };","map":{"version":3,"names":["v4","uuidv4","initialState","exerciseReducer","state","action","type","program","workouts","map","workout","id","payload","workoutId","_workout$exercises","currentExercises","exercises","newExercises","reduce","acc","exercise","some","ex","exerciseCatalogId","newExercise","isNew","push","updatedExercises","catalog_exercise_id","updatedExercise","filteredExercises","filter","exerciseId"],"sources":["/Users/mike/Documents/purple.nosync/pow/web-frontend/src/reducers/exerciseReducer.js"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\nimport { initialState } from './programReducer';\n\nfunction exerciseReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'ADD_EXERCISE':\n      return {\n        ...state,\n        program: {\n          ...state.program,\n          workouts: state.program.workouts.map(workout => {\n            if (workout.id === action.payload.workoutId) {\n              const currentExercises = workout.exercises ?? [];\n              const newExercises = action.payload.exercises.reduce(\n                (acc, exercise) => {\n                  if (\n                    !currentExercises.some(\n                      ex => ex.exerciseCatalogId === exercise.exerciseCatalogId\n                    )\n                  ) {\n                    const newExercise = {\n                      ...exercise,\n                      id: uuidv4(),\n                      isNew: true\n                    };\n                    acc.push(newExercise);\n                  }\n                  return acc;\n                },\n                []\n              );\n\n              return {\n                ...workout,\n                exercises: [...currentExercises, ...newExercises]\n              };\n            }\n            return workout;\n          })\n        }\n      };\n\n    case 'UPDATE_EXERCISE':\n      return {\n        ...state,\n        program: {\n          ...state.program,\n          workouts: state.program.workouts.map(workout => {\n            if (workout.id === action.payload.workoutId) {\n              // Map through exercises to update the specific one\n              const updatedExercises = workout.exercises.map(exercise => {\n                if (\n                  exercise.catalog_exercise_id ===\n                  action.payload.updatedExercise.catalog_exercise_id\n                ) {\n                  return {\n                    ...exercise,\n                    ...action.payload.updatedExercise\n                  };\n                }\n                return exercise;\n              });\n              return {\n                ...workout,\n                exercises: updatedExercises\n              };\n            }\n            return workout;\n          })\n        }\n      };\n    case 'DELETE_EXERCISE':\n      return {\n        ...state,\n        program: {\n          ...state.program,\n          workouts: state.program.workouts.map(workout => {\n            if (workout.id === action.payload.workoutId) {\n              // Filter out the exercise that needs to be deleted\n              const filteredExercises = workout.exercises.filter(\n                exercise => exercise.id !== action.payload.exerciseId\n              );\n              return {\n                ...workout,\n                exercises: filteredExercises\n              };\n            }\n            return workout;\n          })\n        }\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport { exerciseReducer, initialState };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}