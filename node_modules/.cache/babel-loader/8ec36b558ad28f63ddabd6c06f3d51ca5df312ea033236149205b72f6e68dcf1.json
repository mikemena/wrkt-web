{"ast":null,"code":"import { actionTypes } from '../actions/actionTypes';\nimport { initialState } from './initialState';\nfunction exerciseReducer(initialState, action) {\n  switch (action.type) {\n    case actionTypes.ADD_EXERCISE:\n      console.log('ADD_EXERCISE action:', action);\n      console.log('State:', state);\n      console.log('initialState:', initialState);\n      const {\n        exercise\n      } = action.payload; // Assuming 'exercise' contains the necessary exercise details including its ID\n      const activeWorkoutId = state.activeWorkout;\n      console.log('Active workout ID:', activeWorkoutId);\n\n      // Ensure that there is an active workout and it exists in the state\n      if (!activeWorkoutId || !state.workouts[activeWorkoutId]) {\n        console.error('Active workout is undefined or does not exist in the state:', activeWorkoutId);\n        return state; // Exit without making changes if there's no valid active workout\n      }\n\n      // Retrieve the current list of exercises for the active workout, defaulting to an empty array if undefined\n      const currentExercises = state.workouts[activeWorkoutId].exercises || [];\n\n      // Return the updated state with the new exercise added to the active workout\n      return {\n        ...state,\n        workouts: {\n          ...state.workouts,\n          [activeWorkoutId]: {\n            ...state.workouts[activeWorkoutId],\n            exercises: [...currentExercises, exercise.id] // Add the new exercise ID to the list of exercises\n          }\n        }\n      };\n    case actionTypes.UPDATE_EXERCISE:\n      console.log('UPDATE_EXERCISE action:', action);\n      const {\n        id,\n        updates\n      } = action.payload;\n      const workoutContainingExercise = Object.values(state.workouts).find(workout => workout.exercises.includes(id));\n      if (workoutContainingExercise) {\n        return {\n          ...state,\n          workouts: {\n            ...state.workouts,\n            [workoutContainingExercise.id]: {\n              ...workoutContainingExercise,\n              exercises: workoutContainingExercise.exercises.map(ex => ex.id === id ? {\n                ...ex,\n                ...updates\n              } : ex)\n            }\n          }\n        };\n      } else {\n        console.error('Exercise id does not exist in state:', id);\n      }\n      return state;\n    case actionTypes.DELETE_EXERCISE:\n      console.log('DELETE_EXERCISE action:', action);\n      const newState = {\n        ...state\n      };\n      delete newState[action.payload];\n      return newState;\n    default:\n      return state;\n  }\n}\nexport { exerciseReducer };","map":{"version":3,"names":["actionTypes","initialState","exerciseReducer","action","type","ADD_EXERCISE","console","log","state","exercise","payload","activeWorkoutId","activeWorkout","workouts","error","currentExercises","exercises","id","UPDATE_EXERCISE","updates","workoutContainingExercise","Object","values","find","workout","includes","map","ex","DELETE_EXERCISE","newState"],"sources":["/Users/mike/Documents/purple.nosync/pow/web-frontend/src/reducers/exerciseReducer.js"],"sourcesContent":["import { actionTypes } from '../actions/actionTypes';\nimport { initialState } from './initialState';\n\nfunction exerciseReducer(initialState, action) {\n  switch (action.type) {\n    case actionTypes.ADD_EXERCISE:\n      console.log('ADD_EXERCISE action:', action);\n      console.log('State:', state);\n      console.log('initialState:', initialState);\n      const { exercise } = action.payload; // Assuming 'exercise' contains the necessary exercise details including its ID\n      const activeWorkoutId = state.activeWorkout;\n      console.log('Active workout ID:', activeWorkoutId);\n\n      // Ensure that there is an active workout and it exists in the state\n      if (!activeWorkoutId || !state.workouts[activeWorkoutId]) {\n        console.error(\n          'Active workout is undefined or does not exist in the state:',\n          activeWorkoutId\n        );\n        return state; // Exit without making changes if there's no valid active workout\n      }\n\n      // Retrieve the current list of exercises for the active workout, defaulting to an empty array if undefined\n      const currentExercises = state.workouts[activeWorkoutId].exercises || [];\n\n      // Return the updated state with the new exercise added to the active workout\n      return {\n        ...state,\n        workouts: {\n          ...state.workouts,\n          [activeWorkoutId]: {\n            ...state.workouts[activeWorkoutId],\n            exercises: [...currentExercises, exercise.id] // Add the new exercise ID to the list of exercises\n          }\n        }\n      };\n\n    case actionTypes.UPDATE_EXERCISE:\n      console.log('UPDATE_EXERCISE action:', action);\n      const { id, updates } = action.payload;\n      const workoutContainingExercise = Object.values(state.workouts).find(\n        workout => workout.exercises.includes(id)\n      );\n\n      if (workoutContainingExercise) {\n        return {\n          ...state,\n          workouts: {\n            ...state.workouts,\n            [workoutContainingExercise.id]: {\n              ...workoutContainingExercise,\n              exercises: workoutContainingExercise.exercises.map(ex =>\n                ex.id === id ? { ...ex, ...updates } : ex\n              )\n            }\n          }\n        };\n      } else {\n        console.error('Exercise id does not exist in state:', id);\n      }\n      return state;\n\n    case actionTypes.DELETE_EXERCISE:\n      console.log('DELETE_EXERCISE action:', action);\n      const newState = { ...state };\n      delete newState[action.payload];\n      return newState;\n\n    default:\n      return state;\n  }\n}\n\nexport { exerciseReducer };\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,wBAAwB;AACpD,SAASC,YAAY,QAAQ,gBAAgB;AAE7C,SAASC,eAAeA,CAACD,YAAY,EAAEE,MAAM,EAAE;EAC7C,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKJ,WAAW,CAACK,YAAY;MAC3BC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEJ,MAAM,CAAC;MAC3CG,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEC,KAAK,CAAC;MAC5BF,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEN,YAAY,CAAC;MAC1C,MAAM;QAAEQ;MAAS,CAAC,GAAGN,MAAM,CAACO,OAAO,CAAC,CAAC;MACrC,MAAMC,eAAe,GAAGH,KAAK,CAACI,aAAa;MAC3CN,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEI,eAAe,CAAC;;MAElD;MACA,IAAI,CAACA,eAAe,IAAI,CAACH,KAAK,CAACK,QAAQ,CAACF,eAAe,CAAC,EAAE;QACxDL,OAAO,CAACQ,KAAK,CACX,6DAA6D,EAC7DH,eACF,CAAC;QACD,OAAOH,KAAK,CAAC,CAAC;MAChB;;MAEA;MACA,MAAMO,gBAAgB,GAAGP,KAAK,CAACK,QAAQ,CAACF,eAAe,CAAC,CAACK,SAAS,IAAI,EAAE;;MAExE;MACA,OAAO;QACL,GAAGR,KAAK;QACRK,QAAQ,EAAE;UACR,GAAGL,KAAK,CAACK,QAAQ;UACjB,CAACF,eAAe,GAAG;YACjB,GAAGH,KAAK,CAACK,QAAQ,CAACF,eAAe,CAAC;YAClCK,SAAS,EAAE,CAAC,GAAGD,gBAAgB,EAAEN,QAAQ,CAACQ,EAAE,CAAC,CAAC;UAChD;QACF;MACF,CAAC;IAEH,KAAKjB,WAAW,CAACkB,eAAe;MAC9BZ,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEJ,MAAM,CAAC;MAC9C,MAAM;QAAEc,EAAE;QAAEE;MAAQ,CAAC,GAAGhB,MAAM,CAACO,OAAO;MACtC,MAAMU,yBAAyB,GAAGC,MAAM,CAACC,MAAM,CAACd,KAAK,CAACK,QAAQ,CAAC,CAACU,IAAI,CAClEC,OAAO,IAAIA,OAAO,CAACR,SAAS,CAACS,QAAQ,CAACR,EAAE,CAC1C,CAAC;MAED,IAAIG,yBAAyB,EAAE;QAC7B,OAAO;UACL,GAAGZ,KAAK;UACRK,QAAQ,EAAE;YACR,GAAGL,KAAK,CAACK,QAAQ;YACjB,CAACO,yBAAyB,CAACH,EAAE,GAAG;cAC9B,GAAGG,yBAAyB;cAC5BJ,SAAS,EAAEI,yBAAyB,CAACJ,SAAS,CAACU,GAAG,CAACC,EAAE,IACnDA,EAAE,CAACV,EAAE,KAAKA,EAAE,GAAG;gBAAE,GAAGU,EAAE;gBAAE,GAAGR;cAAQ,CAAC,GAAGQ,EACzC;YACF;UACF;QACF,CAAC;MACH,CAAC,MAAM;QACLrB,OAAO,CAACQ,KAAK,CAAC,sCAAsC,EAAEG,EAAE,CAAC;MAC3D;MACA,OAAOT,KAAK;IAEd,KAAKR,WAAW,CAAC4B,eAAe;MAC9BtB,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEJ,MAAM,CAAC;MAC9C,MAAM0B,QAAQ,GAAG;QAAE,GAAGrB;MAAM,CAAC;MAC7B,OAAOqB,QAAQ,CAAC1B,MAAM,CAACO,OAAO,CAAC;MAC/B,OAAOmB,QAAQ;IAEjB;MACE,OAAOrB,KAAK;EAChB;AACF;AAEA,SAASN,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}